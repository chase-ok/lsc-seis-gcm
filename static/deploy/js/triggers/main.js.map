{
  "version": 3,
  "file": "/mnt/qfs4/chase.kernan/public_html/cgi-bin/lsc-seis-gcm/static/deploy/js/triggers/main.js",
  "sources": [
    "../../../build/js/utils.js",
    "../../../build/js/plots.js",
    "../../../build/js/triggers/scroller.js",
    "../../../build/js/triggers/store.js",
    "../../../build/js/triggers/densities.js",
    "../../../build/js/triggers/distributions.js",
    "../../../build/js/triggers/main.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3LA,AD4LA;AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACruBA,ADsuBA;ACruBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChPA,ADiPA;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1JA,AD2JA;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7IA,AD8IA;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtHA,ADuHA;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "\n(function() {\n\n  define('utils',['d3'], function(d3) {\n    var IntervalFunc, loadJSON, loadUnwrappedJSON;\n    IntervalFunc = (function() {\n\n      function IntervalFunc(_func, _period) {\n        this._func = _func;\n        this._period = _period != null ? _period : 1000;\n        this._id = null;\n        this._running = false;\n      }\n\n      IntervalFunc.prototype.func = function(func) {\n        if (func != null) {\n          this._func = func;\n          if (this.running()) {\n            this.reset();\n          }\n          return this;\n        } else {\n          return this._func;\n        }\n      };\n\n      IntervalFunc.prototype.period = function(period) {\n        if (period != null) {\n          this._period = period;\n          if (this.running()) {\n            this.reset();\n          }\n          return this;\n        } else {\n          return this._period;\n        }\n      };\n\n      IntervalFunc.prototype.running = function(running) {\n        if (running != null) {\n          this._running = running;\n          if (this._id != null) {\n            clearInterval(this._id);\n            this._id = null;\n          }\n          if (running) {\n            this._id = setInterval(this.func(), this.period());\n          }\n          return this;\n        } else {\n          return this._running;\n        }\n      };\n\n      IntervalFunc.prototype.reset = function() {\n        this.running(false);\n        return this.running(true);\n      };\n\n      return IntervalFunc;\n\n    })();\n    return {\n      definitions: window.definitions,\n      describe: function(obj, attrs) {\n        var attr, value;\n        for (attr in attrs) {\n          value = attrs[attr];\n          obj = obj.attr(attr, value);\n        }\n        return obj;\n      },\n      mergeObj: function(base, newObj) {\n        var key, value;\n        if (base == null) {\n          base = {};\n        }\n        for (key in newObj) {\n          value = newObj[key];\n          if (value != null) {\n            base[key] = value;\n          }\n        }\n        return base;\n      },\n      isEmpty: function(obj) {\n        var prop, value;\n        for (prop in obj) {\n          value = obj[prop];\n          if (obj.hasOwnProperty(prop)) {\n            return false;\n          }\n        }\n        return true;\n      },\n      mash: function(properties) {\n        var obj, prop, _i, _len;\n        obj = {};\n        for (_i = 0, _len = properties.length; _i < _len; _i++) {\n          prop = properties[_i];\n          obj[prop[0]] = prop[1];\n        }\n        return obj;\n      },\n      loadJSON: loadJSON = function(url, onData, numRetries) {\n        if (numRetries == null) {\n          numRetries = 3;\n        }\n        if (!(numRetries > 0)) {\n          return;\n        }\n        return d3.json(definitions.webRoot + url, function(error, json) {\n          if ((error != null) || !json.success) {\n            if (error != null) {\n              console.log(error);\n            }\n            if (json != null) {\n              console.log(json.error);\n            }\n            return setTimeout((function() {\n              return loadJSON(url, onData, numRetries - 1);\n            }), 10);\n          } else {\n            return onData(json.data);\n          }\n        });\n      },\n      loadUnwrappedJSON: loadUnwrappedJSON = function(url, onData, numRetries) {\n        if (numRetries == null) {\n          numRetries = 3;\n        }\n        if (!(numRetries > 0)) {\n          return;\n        }\n        return d3.json(definitions.webRoot + url, function(error, json) {\n          if (error != null) {\n            if (error != null) {\n              console.log(error);\n            }\n            return setTimeout((function() {\n              return loadUnwrappedJSON(url, onData, numRetries - 1);\n            }), 10);\n          } else {\n            return onData(json);\n          }\n        });\n      },\n      property: function(funcs) {\n        var getter, oldValue, setter;\n        oldValue = void 0;\n        if (typeof funcs === 'function' || !(funcs.get != null)) {\n          getter = function(value) {\n            return value;\n          };\n        } else {\n          getter = funcs.get;\n        }\n        if (typeof funcs === 'function') {\n          setter = funcs;\n        } else {\n          if (funcs.set != null) {\n            setter = funcs.set;\n          } else {\n            setter = function() {\n              throw new Error('property is read-only');\n            };\n          }\n        }\n        return function(value) {\n          if (value != null) {\n            oldValue = setter.call(this, value, oldValue);\n            return this;\n          } else {\n            return getter.call(this, oldValue);\n          }\n        };\n      },\n      degrees: function(radians) {\n        return radians / Math.PI * 180;\n      },\n      radians: function(degrees) {\n        return Math.PI / 180 * degrees;\n      },\n      IntervalFunc: IntervalFunc\n    };\n  });\n\n}).call(this);\n",
    "\n(function() {\n  var __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  define('plots',['utils', 'd3', 'jquery'], function(utils, d3, $) {\n    var BasicPlot, Histogram, ScatterPlot, SvgPlot, ZColorPlot, defaultMargin, describe, mash, mergeObj, property, _clipCount;\n    mash = utils.mash, describe = utils.describe, mergeObj = utils.mergeObj, property = utils.property;\n    _clipCount = 0;\n    defaultMargin = {\n      top: 40,\n      right: 70,\n      bottom: 50,\n      left: 60\n    };\n    SvgPlot = (function() {\n\n      function SvgPlot(rootSelector, margin, dimensions) {\n        var dim;\n        this.rootSelector = rootSelector != null ? rootSelector : \"body\";\n        this.margin = margin != null ? margin : defaultMargin;\n        this.dimensions = dimensions != null ? dimensions : ['x', 'y'];\n        this.root = d3.select(this.rootSelector);\n        this.size = {\n          x: this.root.attr(\"width\"),\n          y: this.root.attr(\"height\")\n        };\n        this.canvasSize = {\n          x: this.size.x - this.margin.left - this.margin.right,\n          y: this.size.y - this.margin.top - this.margin.bottom\n        };\n        this._scales = mash((function() {\n          var _i, _len, _ref, _results;\n          _ref = this.dimensions;\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            dim = _ref[_i];\n            _results.push([dim, d3.scale.linear()]);\n          }\n          return _results;\n        }).call(this));\n        this._title = \"\";\n        this._prepared = false;\n      }\n\n      SvgPlot.prototype.select = function(selector) {\n        return d3.select(\"\" + this.rootSelector + \" \" + selector);\n      };\n\n      SvgPlot.prototype.scales = function(scales, ranges) {\n        var dim, range;\n        if (ranges == null) {\n          ranges = {\n            x: [0, this.canvasSize.x],\n            y: [this.canvasSize.y, 0]\n          };\n        }\n        if (scales != null) {\n          mergeObj(this._scales, scales);\n          this.declareDirty();\n          return this;\n        } else {\n          for (dim in ranges) {\n            range = ranges[dim];\n            this._scales[dim].range(range);\n          }\n          return this._scales;\n        }\n      };\n\n      SvgPlot.prototype.title = function(title) {\n        if (title != null) {\n          this._title = title;\n          if (this._prepared) {\n            this.select(\".title\").text(title);\n          }\n          return this;\n        } else {\n          return this._title;\n        }\n      };\n\n      SvgPlot.prototype.limits = function(limits) {\n        var dim, limit;\n        if (limits != null) {\n          for (dim in limits) {\n            limit = limits[dim];\n            this._scales[dim].domain(limit);\n          }\n          this.declareDirty();\n          return this;\n        } else {\n          return mash((function() {\n            var _i, _len, _ref, _results;\n            _ref = this.dimensions;\n            _results = [];\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n              dim = _ref[_i];\n              _results.push([dim, this._scales[dim].domain()]);\n            }\n            return _results;\n          }).call(this));\n        }\n      };\n\n      SvgPlot.prototype.maps = function() {\n        var dim;\n        return mash((function() {\n          var _i, _len, _ref, _results;\n          _ref = this.dimensions;\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            dim = _ref[_i];\n            _results.push([dim, this._scales[dim].copy()]);\n          }\n          return _results;\n        }).call(this));\n      };\n\n      SvgPlot.prototype.clear = function() {\n        if (!this._prepared) {\n          return;\n        }\n        this.canvas.remove();\n        this._prepared = false;\n        return this.prepare();\n      };\n\n      SvgPlot.prototype.prepare = function() {\n        if (this._prepared) {\n          return false;\n        }\n        this._prepareCanvas();\n        this._prepareCanvasClipPath();\n        this._prepareTitle();\n        return this._prepared = true;\n      };\n\n      SvgPlot.prototype.declareDirty = function() {\n        this.clear();\n        this.prepare();\n        return this;\n      };\n\n      SvgPlot.prototype._prepareCanvas = function() {\n        this.canvas = describe(this.root.append(\"g\"), {\n          \"class\": \"canvas\",\n          transform: \"translate(\" + this.margin.left + \", \" + this.margin.top + \")\"\n        });\n        return this.svgDefs = this.canvas.append(\"defs\");\n      };\n\n      SvgPlot.prototype._prepareCanvasClipPath = function() {\n        this.canvasClipId = \"canvas-clip-\" + (_clipCount += 1);\n        this._canvasClip = this.canvas.append(\"clipPath\").attr(\"id\", this.canvasClipId);\n        return describe(this._canvasClip.append(\"rect\"), {\n          x: 0,\n          y: 0,\n          width: this.canvasSize.x,\n          height: this.canvasSize.y\n        });\n      };\n\n      SvgPlot.prototype._prepareTitle = function() {\n        var fontHeight;\n        fontHeight = 20;\n        return describe(this.canvas.append(\"text\").text(this._title), {\n          x: this.canvasSize.x / 2,\n          y: -this.margin.top + fontHeight * 1.1,\n          \"text-anchor\": \"middle\",\n          \"font-size\": \"\" + fontHeight,\n          \"class\": \"title axis-label\"\n        });\n      };\n\n      return SvgPlot;\n\n    })();\n    BasicPlot = (function(_super) {\n\n      __extends(BasicPlot, _super);\n\n      function BasicPlot(rootSelector, dimensions) {\n        var dim;\n        if (rootSelector == null) {\n          rootSelector = \"body\";\n        }\n        if (dimensions == null) {\n          dimensions = ['x', 'y'];\n        }\n        BasicPlot.__super__.constructor.call(this, rootSelector, null, dimensions);\n        this._axisLabels = mash((function() {\n          var _i, _len, _ref, _results;\n          _ref = this.dimensions;\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            dim = _ref[_i];\n            _results.push([dim, dim]);\n          }\n          return _results;\n        }).call(this));\n        this._ticks = mash((function() {\n          var _i, _len, _ref, _results;\n          _ref = this.dimensions;\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            dim = _ref[_i];\n            _results.push([dim, null]);\n          }\n          return _results;\n        }).call(this));\n        this._showGrid = true;\n      }\n\n      BasicPlot.prototype.select = function(selector) {\n        return d3.select(\"\" + this.rootSelector + \" \" + selector);\n      };\n\n      BasicPlot.prototype.axisLabels = function(labels) {\n        var dim, label, _ref;\n        if (labels != null) {\n          mergeObj(this._axisLabels, labels);\n          if (this._prepared) {\n            _ref = this._axisLabels;\n            for (dim in _ref) {\n              label = _ref[dim];\n              this.select(\".\" + dim + \".axis-label\").text(label);\n            }\n          }\n          return this;\n        } else {\n          return this._axisLabels;\n        }\n      };\n\n      BasicPlot.prototype.ticks = function(ticks) {\n        if (ticks != null) {\n          mergeObj(this._ticks, ticks);\n          this.declareDirty();\n          return this;\n        } else {\n          return this._ticks;\n        }\n      };\n\n      BasicPlot.prototype.showGrid = function(showGrid) {\n        if (showGrid != null) {\n          this._showGrid = showGrid;\n          this.declareDirty();\n          return this;\n        } else {\n          return this._showGrid;\n        }\n      };\n\n      BasicPlot.prototype.prepare = function() {\n        if (!BasicPlot.__super__.prepare.call(this)) {\n          return;\n        }\n        this._prepareGrid();\n        this._prepareAxes();\n        return this._prepareAxisLabels();\n      };\n\n      BasicPlot.prototype._prepareGrid = function() {\n        var axes;\n        if (!this._showGrid) {\n          return;\n        }\n        axes = this._makeAxes();\n        axes.x.tickSize(-this.canvasSize.y, 0, 0).tickFormat(\"\");\n        axes.y.tickSize(-this.canvasSize.x, 0, 0).tickFormat(\"\");\n        (describe(this.canvas.append(\"g\"), {\n          \"class\": \"x grid\",\n          transform: \"translate(0, \" + this.canvasSize.y + \")\"\n        })).call(axes.x);\n        return (describe(this.canvas.append(\"g\"), {\n          \"class\": \"y grid\"\n        })).call(axes.y);\n      };\n\n      BasicPlot.prototype._prepareAxisLabels = function() {\n        var fontHeight, rotated;\n        fontHeight = 15;\n        describe(this.canvas.append(\"text\").text(this._axisLabels.x), {\n          x: this.canvasSize.x / 2,\n          y: this.canvasSize.y + this.margin.bottom - fontHeight * 1.1,\n          \"text-anchor\": \"middle\",\n          \"font-size\": \"\" + fontHeight,\n          \"class\": \"x axis-label\"\n        });\n        rotated = this.canvas.append(\"g\").attr(\"transform\", \"rotate(-90)\");\n        return describe(rotated.append(\"text\").text(this._axisLabels.y), {\n          x: -this.canvasSize.y / 2,\n          y: fontHeight * 1.1 - this.margin.left,\n          \"text-anchor\": \"middle\",\n          \"font-size\": \"\" + fontHeight,\n          \"class\": \"y axis-label\"\n        });\n      };\n\n      BasicPlot.prototype._prepareAxes = function() {\n        var axes;\n        axes = this._makeAxes();\n        (describe(this.canvas.append(\"g\"), {\n          \"class\": \"x axis\",\n          transform: \"translate(0, \" + this.canvasSize.y + \")\"\n        })).call(axes.x);\n        return (describe(this.canvas.append(\"g\"), {\n          \"class\": \"y axis\"\n        })).call(axes.y);\n      };\n\n      BasicPlot.prototype._makeAxes = function(orientations) {\n        var axes, axis, dim, scales, _i, _len, _ref;\n        if (orientations == null) {\n          orientations = {\n            x: \"bottom\",\n            y: \"left\"\n          };\n        }\n        axes = {};\n        scales = this.scales();\n        _ref = this.dimensions;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          dim = _ref[_i];\n          axis = d3.svg.axis().scale(scales[dim]).orient(orientations[dim]);\n          if (this._ticks[dim] != null) {\n            axis.ticks.apply(axis, this._ticks[dim]);\n          }\n          axes[dim] = axis;\n        }\n        return axes;\n      };\n\n      return BasicPlot;\n\n    })(SvgPlot);\n    ZColorPlot = (function(_super) {\n\n      __extends(ZColorPlot, _super);\n\n      function ZColorPlot(rootSelector, dimensions) {\n        if (dimensions == null) {\n          dimensions = ['x', 'y', 'z'];\n        }\n        ZColorPlot.__super__.constructor.call(this, rootSelector, dimensions);\n        this._zBarWidth = 30;\n        this.canvasSize.x -= this._zBarWidth;\n        this._zColor = {\n          lower: d3.rgb(0, 0, 0),\n          upper: d3.rgb(255, 0, 0)\n        };\n      }\n\n      ZColorPlot.prototype.zColor = function(zColor) {\n        if (zColor != null) {\n          mergeObj(this._zColor(zColor));\n          this.declareDirty();\n          return this;\n        } else {\n          return this._zColor;\n        }\n      };\n\n      ZColorPlot.prototype.scales = function(scales, ranges) {\n        var dim, range;\n        if (ranges == null) {\n          ranges = {\n            z: [this.canvasSize.y, 0]\n          };\n        }\n        if (scales != null) {\n          return ZColorPlot.__super__.scales.call(this, scales);\n        } else {\n          scales = ZColorPlot.__super__.scales.call(this);\n          for (dim in ranges) {\n            range = ranges[dim];\n            scales[dim].range(range);\n          }\n          return scales;\n        }\n      };\n\n      ZColorPlot.prototype.maps = function() {\n        var colorInterp, height, oldMaps, zColor;\n        oldMaps = ZColorPlot.__super__.maps.call(this);\n        height = this.canvasSize.y;\n        zColor = this.zColor();\n        colorInterp = d3.interpolateRgb(zColor.lower, zColor.upper);\n        return {\n          x: oldMaps.x,\n          y: oldMaps.y,\n          z: function(z) {\n            return colorInterp(1.0 - oldMaps.z(z) / height);\n          }\n        };\n      };\n\n      ZColorPlot.prototype.prepare = function() {\n        if (!ZColorPlot.__super__.prepare.call(this)) {\n          return;\n        }\n        this._prepareZGradient();\n        this._prepareZColorBar();\n        this._prepareZAxis();\n        return this._prepareZLabel();\n      };\n\n      ZColorPlot.prototype._prepareZGradient = function() {\n        var zColor;\n        zColor = this.zColor();\n        this._zGradient = describe(this.svgDefs.append(\"linearGradient\"), {\n          id: \"zGradient\",\n          x1: \"0%\",\n          y1: \"100%\",\n          x2: \"0%\",\n          y2: \"0%\"\n        });\n        describe(this._zGradient.append(\"stop\"), {\n          offset: \"0%\",\n          \"stop-color\": zColor.lower,\n          \"stop-opacity\": 1\n        });\n        return describe(this._zGradient.append(\"stop\"), {\n          offset: \"100%\",\n          \"stop-color\": zColor.upper,\n          \"stop-opacity\": 1\n        });\n      };\n\n      ZColorPlot.prototype._prepareZColorBar = function() {\n        var spacing;\n        spacing = 10;\n        return this._zColorBar = describe(this.canvas.append(\"rect\"), {\n          x: this.canvasSize.x + spacing,\n          y: 0,\n          width: this._zBarWidth - spacing,\n          height: this.canvasSize.y,\n          fill: \"url(#\" + (this._zGradient.attr('id')) + \")\"\n        });\n      };\n\n      ZColorPlot.prototype._prepareZAxis = function() {\n        return (describe(this.canvas.append(\"g\"), {\n          \"class\": \"z axis\",\n          transform: \"translate(\" + (this.canvasSize.x + this._zBarWidth) + \", 0)\"\n        })).call(this._makeAxes({\n          z: \"right\"\n        }).z);\n      };\n\n      ZColorPlot.prototype._prepareZLabel = function() {\n        var fontHeight, rotated;\n        fontHeight = 15;\n        rotated = this.canvas.append(\"g\").attr(\"transform\", \"rotate(-90)\");\n        return describe(rotated.append(\"text\").text(this.axisLabels().z), {\n          x: -this.canvasSize.y / 2,\n          y: this.canvasSize.x + this._zBarWidth + this.margin.right,\n          \"text-anchor\": \"middle\",\n          \"font-size\": \"\" + fontHeight,\n          \"class\": \"z axis-label\"\n        });\n      };\n\n      return ZColorPlot;\n\n    })(BasicPlot);\n    Histogram = (function(_super) {\n\n      __extends(Histogram, _super);\n\n      function Histogram(rootSelector) {\n        Histogram.__super__.constructor.call(this, rootSelector);\n        this.bins([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]);\n        this.useProbability(true);\n        this.limits({\n          y: [0, 1]\n        });\n      }\n\n      Histogram.prototype.bins = function(bins) {\n        if (bins != null) {\n          this._bins = bins;\n          this.declareDirty();\n          return this;\n        } else {\n          return this._bins;\n        }\n      };\n\n      Histogram.prototype.useProbability = function(useProbability) {\n        if (useProbability != null) {\n          this._useProbability = useProbability;\n          this.axisLabels({\n            y: useProbability ? \"Probability\" : \"Frequency\"\n          });\n          this.declareDirty();\n          return this;\n        } else {\n          return this._useProbability;\n        }\n      };\n\n      Histogram.prototype.plot = function(values) {\n        var data, histogram, rects, x, y, _ref;\n        this.prepare();\n        _ref = this.scales(), x = _ref.x, y = _ref.y;\n        histogram = d3.layout.histogram();\n        if (this.bins() != null) {\n          histogram.bins(this.bins());\n        }\n        histogram.frequency(!this.useProbability());\n        data = histogram(values);\n        this.canvas = d3.select(this.rootSelector + \">.canvas\");\n        rects = this.canvas.selectAll(\"rect.histogram-bar\").data(data);\n        describe(rects.enter().append(\"rect\"), {\n          \"class\": \"histogram-bar\",\n          x: function(d) {\n            return Math.floor(x(d.x));\n          },\n          y: function(d) {\n            return y(d.y);\n          },\n          width: function(d) {\n            return Math.ceil(x(d.x + d.dx) - x(d.x));\n          },\n          height: function(d) {\n            return y(0) - y(d.y);\n          },\n          fill: \"steelblue\",\n          \"shape-rendering\": \"crispEdge\"\n        });\n        return rects.exit().remove();\n      };\n\n      return Histogram;\n\n    })(BasicPlot);\n    ScatterPlot = (function(_super) {\n\n      __extends(ScatterPlot, _super);\n\n      function ScatterPlot(rootSelector, dimensions) {\n        if (rootSelector == null) {\n          rootSelector = \"body\";\n        }\n        if (dimensions == null) {\n          dimensions = ['x', 'y', 'color', 'size'];\n        }\n        ScatterPlot.__super__.constructor.call(this, rootSelector, dimensions);\n        this.showLegend(false);\n        this.scales({\n          color: d3.scale.category20(),\n          size: d3.scale.ordinal()\n        });\n        this.groups(['default']);\n      }\n\n      ScatterPlot.prototype.showLegend = property(function(show) {\n        this.declareDirty();\n        return show;\n      });\n\n      ScatterPlot.prototype.groups = property(function(groups) {\n        var group;\n        this.scales().color.domain(groups);\n        this.scales().size.domain(groups).range((function() {\n          var _i, _len, _results;\n          _results = [];\n          for (_i = 0, _len = groups.length; _i < _len; _i++) {\n            group = groups[_i];\n            _results.push(5);\n          }\n          return _results;\n        })());\n        this.declareDirty();\n        return groups;\n      });\n\n      ScatterPlot.prototype.sizes = property({\n        get: function() {\n          var groups, i, range;\n          range = this.scales().size.range();\n          groups = this.groups();\n          return mash((function() {\n            var _i, _ref, _results;\n            _results = [];\n            for (i = _i = 0, _ref = groups.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n              _results.push([groups[i], range[i]]);\n            }\n            return _results;\n          })());\n        },\n        set: function(sizes) {\n          var groups, i, range, size, _i, _ref;\n          range = this.scales().size.range();\n          groups = this.groups();\n          for (i = _i = 0, _ref = groups.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            size = sizes[groups[i]];\n            if (size != null) {\n              range[i] = size;\n            }\n          }\n          this.scales().size.range(range);\n          return this.declareDirty();\n        }\n      });\n\n      ScatterPlot.prototype.colors = property({\n        get: function() {\n          var groups, i, range;\n          range = this.scales().color.range();\n          groups = this.groups();\n          return mash((function() {\n            var _i, _ref, _results;\n            _results = [];\n            for (i = _i = 0, _ref = groups.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n              _results.push([groups[i], range[i]]);\n            }\n            return _results;\n          })());\n        },\n        set: function(colors) {\n          var color, groups, i, range, _i, _ref;\n          range = this.scales().color.range();\n          groups = this.groups();\n          for (i = _i = 0, _ref = groups.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            color = colors[groups[i]];\n            if (color != null) {\n              range[i] = color;\n            }\n          }\n          this.scales().color.range(range);\n          return this.declareDirty();\n        }\n      });\n\n      ScatterPlot.prototype.prepare = function() {\n        if (!ScatterPlot.__super__.prepare.call(this)) {\n          return;\n        }\n        return this._prepareLegend();\n      };\n\n      ScatterPlot.prototype._prepareLegend = function() {\n        var color, groups, legend, size, spacing, _i, _ref, _results,\n          _this = this;\n        if (!this.showLegend()) {\n          return;\n        }\n        spacing = 5;\n        size = {\n          x: 100,\n          y: 20\n        };\n        groups = this.groups();\n        legend = describe(this.canvas.append(\"g\").selectAll(\".legend\").data(d3.zip((function() {\n          _results = [];\n          for (var _i = 0, _ref = groups.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n          return _results;\n        }).apply(this), groups)).enter().append(\"g\"), {\n          \"class\": \"legend\",\n          transform: function(d) {\n            return \"translate(\" + (_this.canvasSize.x - size.x) + \", \" + (d[0] * (size.y + spacing)) + \")\";\n          }\n        });\n        color = this.scales().color;\n        describe(legend.append(\"rect\"), {\n          x: 0,\n          y: 0,\n          width: size.x,\n          height: size.y,\n          stroke: \"none\",\n          fill: function(d) {\n            return color(d[1]);\n          }\n        });\n        return describe(legend.append(\"text\").text(function(d) {\n          return d[1];\n        }), {\n          x: 3,\n          y: size.y - 5,\n          \"text-anchor\": \"start\",\n          \"font-size\": \"\" + (size.y - 8),\n          \"font-weight\": \"bold\",\n          fill: \"white\"\n        });\n      };\n\n      ScatterPlot.prototype.plot = function(groups) {\n        var circles, color, group, merged, point, points, size, x, y, _i, _len, _ref;\n        this.prepare();\n        merged = [];\n        for (group in groups) {\n          points = groups[group];\n          for (_i = 0, _len = points.length; _i < _len; _i++) {\n            point = points[_i];\n            merged.push({\n              group: group,\n              point: point\n            });\n          }\n        }\n        _ref = this.scales(), x = _ref.x, y = _ref.y, color = _ref.color, size = _ref.size;\n        this.canvas = d3.select(this.rootSelector + \">.canvas\");\n        circles = this.canvas.selectAll(\"circle.scatter-point\").data(merged);\n        describe(circles.enter().append(\"circle\"), {\n          \"class\": \"scatter-point\",\n          \"clip-path\": \"url(#\" + this.canvasClipId + \")\"\n        });\n        describe(circles.transition().duration(500), {\n          cx: function(d) {\n            return x(d.point[0]);\n          },\n          cy: function(d) {\n            return y(d.point[1]);\n          },\n          r: function(d) {\n            return size(d.group);\n          },\n          stroke: \"none\",\n          fill: function(d) {\n            return color(d.group);\n          }\n        });\n        return circles.exit().remove();\n      };\n\n      return ScatterPlot;\n\n    })(BasicPlot);\n    return {\n      SvgPlot: SvgPlot,\n      BasicPlot: BasicPlot,\n      ZColorPlot: ZColorPlot,\n      Histogram: Histogram,\n      ScatterPlot: ScatterPlot\n    };\n  });\n\n}).call(this);\n",
    "\n(function() {\n  var __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  define('triggers/scroller',['utils', 'plots', 'd3'], function(utils, plots, d3) {\n    var IntervalFunc, TriggerScroller, describe;\n    describe = utils.describe, IntervalFunc = utils.IntervalFunc;\n    TriggerScroller = (function(_super) {\n\n      __extends(TriggerScroller, _super);\n\n      function TriggerScroller(store, rootSelector) {\n        this.store = store;\n        TriggerScroller.__super__.constructor.call(this, rootSelector);\n        this.windowSize(30);\n        this._autoRefresh = new IntervalFunc();\n        this._nouseScroll = new IntervalFunc();\n        this._keyScroll = new IntervalFunc();\n        this.axisLabels({\n          x: \"Time [s]\",\n          y: \"Frequency [Hz]\",\n          z: \"SNR\"\n        });\n        this.limits({\n          x: [-this._windowSize, 0]\n        });\n      }\n\n      TriggerScroller.prototype.windowSize = function(windowSize) {\n        if (windowSize != null) {\n          this._windowSize = windowSize;\n          this.limits({\n            x: [-windowSize, 0]\n          });\n          this.declareDirty();\n          return this;\n        } else {\n          return this._windowSize;\n        }\n      };\n\n      TriggerScroller.prototype.scrollTo = function(time, animateDuration) {\n        var lastTime, maps, rects, scrollWindow, timeOffset, triggers, widthScale, windowSize, _ref, _ref1;\n        if (animateDuration == null) {\n          animateDuration = null;\n        }\n        this.prepare();\n        lastTime = this._lastTime != null ? this._lastTime : time;\n        if (animateDuration == null) {\n          animateDuration = 1000 * (time - lastTime);\n        }\n        this.axisLabels({\n          x: \"Time [s] since \" + (Math.round(time))\n        });\n        windowSize = this.windowSize();\n        scrollWindow = [time - windowSize, time];\n        (_ref = this.store).indicateWindow.apply(_ref, scrollWindow);\n        timeOffset = function(trigger, time) {\n          return trigger.time_min - time;\n        };\n        maps = this.maps();\n        widthScale = this.canvasSize.x / windowSize;\n        triggers = (_ref1 = this.store).getWindow.apply(_ref1, scrollWindow);\n        rects = this.canvas.selectAll(\"rect.value\").data(triggers, function(trigger) {\n          return trigger.id;\n        });\n        describe(rects.enter().append(\"rect\"), {\n          \"class\": \"value\",\n          x: function(trigger) {\n            return Math.round(maps.x(timeOffset(trigger, lastTime)));\n          },\n          y: function(trigger) {\n            return Math.round(maps.y(trigger.freq_max));\n          },\n          width: function(trigger) {\n            return Math.ceil(widthScale * (trigger.time_max - trigger.time_min));\n          },\n          height: function(trigger) {\n            var diff;\n            diff = maps.y(trigger.freq_min) - maps.y(trigger.freq_max);\n            return Math.ceil(Math.abs(diff));\n          },\n          fill: function(trigger) {\n            return maps.z(trigger.snr);\n          },\n          stroke: \"none\",\n          \"clip-path\": \"url(#\" + this.canvasClipId + \")\"\n        });\n        rects.exit().remove();\n        describe(rects.transition().duration(animateDuration).ease(\"linear\"), {\n          x: function(trigger) {\n            return Math.round(maps.x(timeOffset(trigger, time)));\n          }\n        });\n        return this._lastTime = time;\n      };\n\n      TriggerScroller.prototype.autoRefresh = function(autoRefresh, period) {\n        var lastTime,\n          _this = this;\n        if (period == null) {\n          period = 1000;\n        }\n        if (autoRefresh != null) {\n          this._autoRefresh.running(false);\n          if (autoRefresh) {\n            this._autoRefresh.period(period);\n            lastTime = this._lastTime;\n            this._autoRefresh.func(function() {\n              if (lastTime === _this._lastTime) {\n                _this.scrollTo(_this._lastTime, 0);\n              }\n              return lastTime = _this._lastTime;\n            });\n            this._autoRefresh.running(true);\n          }\n          return this;\n        } else {\n          return this._autoRefresh.running();\n        }\n      };\n\n      TriggerScroller.prototype.mouseScroll = function(mouseScroll, period, scrollRate, region) {\n        var bound, mouse,\n          _this = this;\n        if (period == null) {\n          period = 500;\n        }\n        if (scrollRate == null) {\n          scrollRate = 0.05;\n        }\n        if (region == null) {\n          region = 100;\n        }\n        if (mouseScroll != null) {\n          this._mouseScroll.running(false);\n          if (mouseScroll) {\n            this._mouseScroll.period = period;\n            mouse = {\n              x: this.canvasSize.x / 2,\n              y: this.canvasSize.y / 2\n            };\n            this.canvas.on(\"mouseover\", function() {\n              var _ref;\n              return _ref = d3.mouse(this), mouse.x = _ref[0], mouse.y = _ref[1], _ref;\n            });\n            bound = {\n              left: region,\n              right: this.canvasSize.x - region\n            };\n            this._mouseScroll.func(function() {\n              var time;\n              time = _this._lastTime;\n              if (mouse.x < bound.left) {\n                time -= scrollRate * (bound.left - mouse.x);\n              }\n              if (mouse.x > bound.right) {\n                time += scrollRate * (mouse.x - bound.right);\n              }\n              if (time !== _this._lastTime) {\n                return _this.scrollTo(time, period);\n              }\n            });\n            this._mouseScroll.running(true);\n          }\n          return this;\n        } else {\n          return this._mouseScroll.running();\n        }\n      };\n\n      TriggerScroller.prototype.keyScroll = function(keyScroll, period, rate, left, right) {\n        var down,\n          _this = this;\n        if (period == null) {\n          period = 300;\n        }\n        if (rate == null) {\n          rate = 5.0;\n        }\n        if (left == null) {\n          left = 37;\n        }\n        if (right == null) {\n          right = 39;\n        }\n        if (keyScroll != null) {\n          this._keyScroll.running(false);\n          if (keyScroll) {\n            this._keyScroll.period(period);\n            down = {\n              left: false,\n              right: false\n            };\n            d3.select(\"body\").on(\"keydown\", function() {\n              if (d3.event.keyCode === left) {\n                down.left = true;\n              }\n              if (d3.event.keyCode === right) {\n                return down.right = true;\n              }\n            });\n            d3.select(\"body\").on(\"keyup\", function() {\n              if (d3.event.keyCode === left) {\n                down.left = false;\n              }\n              if (d3.event.keyCode === right) {\n                return down.right = false;\n              }\n            });\n            this._keyScroll.func(function() {\n              var time;\n              time = _this._lastTime;\n              if (down.left) {\n                time -= rate;\n              }\n              if (down.right) {\n                time += rate;\n              }\n              if (time !== _this._lastTime) {\n                return _this.scrollTo(time, period);\n              }\n            });\n            this._keyScroll.running(true);\n          }\n          return this;\n        } else {\n          return this._keyScroll.running();\n        }\n      };\n\n      return TriggerScroller;\n\n    })(plots.ZColorPlot);\n    return {\n      TriggerScroller: TriggerScroller\n    };\n  });\n\n}).call(this);\n",
    "\n(function() {\n\n  define('triggers/store',['utils', 'd3'], function(utils, d3) {\n    var Chunk, IntervalFunc, TriggerStore, defs, loadJSON, _triggerCount;\n    defs = utils.definitions, loadJSON = utils.loadJSON, IntervalFunc = utils.IntervalFunc;\n    _triggerCount = 0;\n    Chunk = (function() {\n\n      function Chunk(channel, startTime, endTime) {\n        this.channel = channel;\n        this.startTime = startTime;\n        this.endTime = endTime;\n        this.accessedTime = 0;\n        this.triggers = [];\n        this.loaded = false;\n      }\n\n      Chunk.prototype.load = function(limit) {\n        var url,\n          _this = this;\n        if (limit == null) {\n          limit = 1000;\n        }\n        this.accessedTime = new Date().getTime();\n        if (this.loaded) {\n          return;\n        }\n        url = (\"/triggers/channel/\" + this.channel.id + \"/\") + (\"\" + this.startTime + \"-\" + this.endTime + \"?limit=\" + limit);\n        return loadJSON(url, function(data) {\n          var trigger, _i, _len, _ref;\n          _this.triggers = data.triggers;\n          _ref = _this.triggers;\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            trigger = _ref[_i];\n            trigger.id = _triggerCount += 1;\n          }\n          return _this.loaded = true;\n        });\n      };\n\n      return Chunk;\n\n    })();\n    TriggerStore = (function() {\n\n      function TriggerStore(channel, timeChunk, maxChunks) {\n        this.channel = channel;\n        this.timeChunk = timeChunk != null ? timeChunk : 30;\n        this.maxChunks = maxChunks != null ? maxChunks : 50;\n        this.chunks = {};\n        this._garbageCollecting = new IntervalFunc(this.garbageCollect, 10000);\n      }\n\n      TriggerStore.prototype.garbageCollecting = function(garbageCollecting, period) {\n        if (period == null) {\n          period = 10000;\n        }\n        if (garbageCollecting != null) {\n          this._garbageCollecting.period(period);\n          this._garbageCollecting.running(garbageCollecting);\n          return this;\n        } else {\n          return this._garbageCollecting.running();\n        }\n      };\n\n      TriggerStore.prototype.indicateWindow = function(startTime, endTime, buffer) {\n        var end, start, _i, _len, _ref, _results;\n        if (buffer == null) {\n          buffer = 2;\n        }\n        _ref = this._getChunkStarts(startTime, endTime, buffer);\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          start = _ref[_i];\n          if (!(this.chunks[start] != null)) {\n            end = start + this.timeChunk;\n            this.chunks[start] = new Chunk(this.channel, start, end);\n          }\n          _results.push(this.chunks[start].load());\n        }\n        return _results;\n      };\n\n      TriggerStore.prototype.getWindow = function(startTime, endTime, buffer) {\n        var start, starts;\n        if (buffer == null) {\n          buffer = 1;\n        }\n        starts = this._getChunkStarts(startTime, endTime, buffer);\n        return [].concat.apply([], (function() {\n          var _i, _len, _results;\n          _results = [];\n          for (_i = 0, _len = starts.length; _i < _len; _i++) {\n            start = starts[_i];\n            _results.push(this.chunks[start].triggers);\n          }\n          return _results;\n        }).call(this));\n      };\n\n      TriggerStore.prototype._getChunkStarts = function(startTime, endTime, buffer) {\n        var i, lowestTime, numChunks, _i, _results;\n        lowestTime = this.timeChunk * (Math.floor(startTime / this.timeChunk) - buffer);\n        numChunks = Math.ceil((endTime - startTime) / this.timeChunk) + 2 * buffer;\n        if (numChunks >= this.maxChunks) {\n          console.log(\"Warning! window is too large: \" + startTime + \"-\" + endTime);\n        }\n        _results = [];\n        for (i = _i = 0; 0 <= numChunks ? _i < numChunks : _i > numChunks; i = 0 <= numChunks ? ++_i : --_i) {\n          _results.push(lowestTime + i * this.timeChunk);\n        }\n        return _results;\n      };\n\n      TriggerStore.prototype.garbageCollect = function() {\n        var chunk, chunksArray, numChunks, numToRemove, _, _i, _len, _ref, _ref1, _ref2, _results;\n        numChunks = 0;\n        _ref = this.chunks;\n        for (_ in _ref) {\n          _ = _ref[_];\n          numChunks += 1;\n        }\n        numToRemove = numChunks - this.maxChunks;\n        if (!(numToRemove > 0)) {\n          return;\n        }\n        _ref1 = this.chunks;\n        for (_ in _ref1) {\n          chunk = _ref1[_];\n          chunksArray = chunk;\n        }\n        chunksArray.sort(function(c1, c2) {\n          return c1.accessedTime - c2.accessedTime;\n        });\n        _ref2 = chunksArray.slice(0, numToRemove);\n        _results = [];\n        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n          chunk = _ref2[_i];\n          _results.push(delete this.chunks[chunk.startTime]);\n        }\n        return _results;\n      };\n\n      return TriggerStore;\n\n    })();\n    return {\n      Chunk: Chunk,\n      TriggerStore: TriggerStore\n    };\n  });\n\n}).call(this);\n",
    "\n(function() {\n  var __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  define('triggers/densities',['utils', 'plots', 'd3', 'jquery'], function(utils, plots, d3, $) {\n    var DensityPlot, defs, describe, loadJSON, toDate;\n    defs = utils.definitions, describe = utils.describe, loadJSON = utils.loadJSON;\n    toDate = function(seconds) {\n      return new Date(seconds * 1000);\n    };\n    DensityPlot = (function(_super) {\n\n      __extends(DensityPlot, _super);\n\n      function DensityPlot(rootSelector, channel) {\n        this.channel = channel;\n        DensityPlot.__super__.constructor.call(this, rootSelector);\n        this._scroller = null;\n        this.axisLabels({\n          x: \"Time [s]\",\n          y: \"Frequency [Hz]\",\n          z: \"SNR Density\"\n        });\n        this.scales({\n          x: d3.time.scale(),\n          y: d3.scale.log().clamp(true),\n          z: d3.scale.log().clamp(true)\n        });\n        this.ticks({\n          x: [5],\n          y: [5],\n          z: [5]\n        });\n      }\n\n      DensityPlot.prototype.scroller = function(scroller) {\n        if (scroller != null) {\n          this._scroller = scroller;\n          return this;\n        } else {\n          return this._scroller;\n        }\n      };\n\n      DensityPlot.prototype.load = function() {\n        var url,\n          _this = this;\n        url = (\"/triggers/channel/\" + this.channel.id + \"/\") + \"densities\";\n        return loadJSON(url, function(data) {\n          var densities, frequencies, highestFreq, times;\n          times = data.times, frequencies = data.frequencies, densities = data.densities;\n          highestFreq = frequencies[frequencies.length - 1];\n          frequencies.push(2 * highestFreq);\n          times.push(2 * times[times.length - 1] - times[times.length - 2]);\n          data = _this._makeData(times, frequencies, densities);\n          return _this._draw(times, frequencies, data);\n        });\n      };\n\n      DensityPlot.prototype._makeData = function(times, frequencies, densities) {\n        var column, data, density, densityRow, end, endDate, row, start, startDate, _i, _j, _ref, _ref1, _ref2, _ref3;\n        data = [];\n        for (row = _i = 0, _ref = densities.length; 0 <= _ref ? _i < _ref : _i > _ref; row = 0 <= _ref ? ++_i : --_i) {\n          _ref1 = times.slice(row, +(row + 1) + 1 || 9e9), start = _ref1[0], end = _ref1[1];\n          if (start === 0 || end === 0) {\n            continue;\n          }\n          _ref2 = [start, end].map(toDate), startDate = _ref2[0], endDate = _ref2[1];\n          densityRow = densities[row];\n          for (column = _j = 0, _ref3 = densityRow.length; 0 <= _ref3 ? _j < _ref3 : _j > _ref3; column = 0 <= _ref3 ? ++_j : --_j) {\n            density = densityRow[column];\n            if (density < 1e1) {\n              continue;\n            }\n            data.push({\n              startDate: startDate,\n              endDate: endDate,\n              freqMin: frequencies[column],\n              freqMax: frequencies[column + 1],\n              density: density\n            });\n          }\n        }\n        return data;\n      };\n\n      DensityPlot.prototype._draw = function(times, frequencies, data) {\n        var context, d, height, image, maps, offset, rootElem, width, x, y, _i, _len,\n          _this = this;\n        this.prepare();\n        this.limits({\n          x: [times[0], times[times.length - 1]].map(toDate),\n          y: d3.extent(frequencies),\n          z: [1e1, 1e4]\n        });\n        maps = this.maps();\n        rootElem = $(this.root[0][0]);\n        offset = {\n          x: rootElem.position().left + this.margin.left,\n          y: rootElem.position().top + this.margin.top\n        };\n        image = describe($(\"<canvas/>\"), {\n          id: 'density-image',\n          width: this.canvasSize.x,\n          height: this.canvasSize.y\n        });\n        image.css({\n          position: \"absolute\",\n          left: offset.x,\n          top: offset.y\n        });\n        image.appendTo($('body'));\n        context = image[0].getContext(\"2d\");\n        for (_i = 0, _len = data.length; _i < _len; _i++) {\n          d = data[_i];\n          context.fillStyle = maps.z(d.density);\n          x = Math.round(maps.x(d.startDate));\n          y = Math.round(maps.y(d.freqMax));\n          width = Math.ceil(maps.x(d.endDate) - maps.x(d.startDate));\n          height = Math.ceil(maps.y(d.freqMin) - maps.y(d.freqMax));\n          context.fillRect(x, y, width, height);\n        }\n        return image.click(function(event) {\n          var time;\n          x = event.pageX - offset.x;\n          time = Math.round(_this.scales().x.invert(x) / 1000);\n          if (_this._scroller != null) {\n            return _this._scroller.scrollTo(time, 0);\n          }\n        });\n      };\n\n      return DensityPlot;\n\n    })(plots.ZColorPlot);\n    return {\n      DensityPlot: DensityPlot\n    };\n  });\n\n}).call(this);\n",
    "\n(function() {\n  var __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  define('triggers/distributions',['utils', 'plots', 'd3', 'jquery'], function(utils, plots, d3, $) {\n    var TriggerDistributionPlot, defs, describe, loadJSON, toDate;\n    defs = utils.definitions, describe = utils.describe, loadJSON = utils.loadJSON;\n    toDate = function(seconds) {\n      return new Date(seconds * 1000);\n    };\n    TriggerDistributionPlot = (function(_super) {\n\n      __extends(TriggerDistributionPlot, _super);\n\n      function TriggerDistributionPlot(rootSelector, channel) {\n        this.channel = channel;\n        TriggerDistributionPlot.__super__.constructor.call(this, rootSelector);\n        this.field(\"SNR\");\n        this.clustered(true);\n      }\n\n      TriggerDistributionPlot.prototype.clustered = function(clustered) {\n        if (clustered != null) {\n          this._clustered = clustered;\n          this.declareDirty();\n          return this;\n        } else {\n          return this._clustered;\n        }\n      };\n\n      TriggerDistributionPlot.prototype.field = function(field) {\n        var i, _i, _results;\n        if (field != null) {\n          this._field = field;\n          switch (field) {\n            case \"SNR\":\n              this.axisLabels({\n                x: \"SNR\"\n              });\n              this.bins((function() {\n                _results = [];\n                for (_i = 0; _i <= 30; _i++){ _results.push(_i); }\n                return _results;\n              }).apply(this));\n              break;\n            case \"Amplitude\":\n              this.axisLabels({\n                x: \"Amplitude\"\n              });\n              this.bins((function() {\n                var _j, _results1;\n                _results1 = [];\n                for (i = _j = 0; _j <= 100; i = ++_j) {\n                  _results1.push(i / 100.0);\n                }\n                return _results1;\n              })());\n              break;\n            case \"Frequency\":\n              this.bins((function() {\n                var _j, _results1;\n                _results1 = [];\n                for (i = _j = 0; _j <= 100; i = ++_j) {\n                  _results1.push(Math.exp(0.05 * i - 1));\n                }\n                return _results1;\n              })());\n              this.scales({\n                x: d3.scale.log().clamp(true)\n              });\n              this.axisLabels({\n                x: \"Frequency\"\n              });\n              break;\n            default:\n              throw new Error(\"Invalid field: \" + field);\n          }\n          this.limits({\n            x: d3.extent(this.bins())\n          });\n          this.declareDirty();\n          return this;\n        } else {\n          return this._field;\n        }\n      };\n\n      TriggerDistributionPlot.prototype.load = function() {\n        var field, url,\n          _this = this;\n        field = (function() {\n          switch (this.field()) {\n            case \"SNR\":\n              return \"snr\";\n            case \"Amplitude\":\n              return \"amplitude\";\n            case \"Frequency\":\n              return \"freq\";\n          }\n        }).call(this);\n        url = (\"/triggers/channel/\" + this.channel.id + \"/\") + (\"field/\" + field + \"?clustered=\" + (this.clustered()));\n        return loadJSON(url, function(data) {\n          var values;\n          values = data.values;\n          return _this.plot(values);\n        });\n      };\n\n      return TriggerDistributionPlot;\n\n    })(plots.Histogram);\n    return {\n      TriggerDistributionPlot: TriggerDistributionPlot\n    };\n  });\n\n}).call(this);\n",
    "\n(function() {\n\n  define('triggers/main',['utils', 'triggers/scroller', 'triggers/store', 'triggers/densities', 'triggers/distributions', 'jquery', 'jquery-ui'], function(utils, scroller, store, densities, dist, $, _) {\n    var channel;\n    console.log(\"Starting\");\n    channel = utils.definitions.channel;\n    return $(function() {\n      var amplPlot, freqPlot, snrPlot, tabs;\n      tabs = $('#tabs').tabs();\n      snrPlot = new dist.TriggerDistributionPlot(\"#snrs\", channel).field(\"SNR\");\n      snrPlot.load();\n      freqPlot = new dist.TriggerDistributionPlot(\"#freqs\", channel).field(\"Frequency\");\n      freqPlot.load();\n      amplPlot = new dist.TriggerDistributionPlot(\"#ampls\", channel).field(\"Amplitude\");\n      amplPlot.load();\n      store = new store.TriggerStore(channel);\n      store.garbageCollecting(true);\n      store.indicateWindow(utils.definitions.time_min);\n      scroller = new scroller.TriggerScroller(store, \"#clusters\");\n      scroller.windowSize(120);\n      scroller.scales({\n        y: d3.scale.log().clamp(true),\n        z: d3.scale.log().clamp(true)\n      });\n      scroller.limits({\n        y: [0.1, 100],\n        z: [1, 200]\n      });\n      scroller.scrollTo(utils.definitions.time_min);\n      scroller.autoRefresh(true);\n      return scroller.keyScroll(true);\n    });\n  });\n\n}).call(this);\n"
  ]
}